
# Урок 2.3: Flask рутинг и URL параметри

## Цели на урока:
В този урок ще научите:
- Как да създавате различни рутове (маршрути) за различни страници на вашето уеб приложение.
- Как да използвате URL параметри, за да създавате динамични уеб страници.
- Как да обработвате различни HTTP заявки.

---

## Основни понятия:
- **Рут (Route)**: Рутовете са основни пътища в едно уеб приложение, които указват на сървъра какво да прави, когато потребителят посети конкретен URL.
- **URL параметри**: Това са променливи в URL, които ни позволяват да визуализираме различна информация в зависимост от входа.
- **Методи на заявки**: HTTP методи, като GET и POST, които се използват за различни видове взаимодействия с уеб сървъра.

---

## Стъпка по стъпка: Създаване на различни рутове и използване на URL параметри

### Стъпка 1: Подготовка на средата
Ако все още не сте създали проект и инсталирали Flask, следвайте стъпките от предишния урок:

1. **Създайте нова проектна директория:**
   ```bash
   mkdir routing_flask_app
   cd routing_flask_app
   ```

2. **Създайте и активирайте виртуална среда:**
   ```bash
   python -m venv venv
   ```

   - **На Windows:**
     ```bash
     venv\Scripts\activate
     ```
   - **На MacOS/Linux:**
     ```bash
     source venv/bin/activate
     ```

3. **Инсталирайте Flask:**
   ```bash
   pip install Flask
   ```

---

### Стъпка 2: Създаване на основния файл `app.py`
1. Отворете нов файл, наречен `app.py`, в проектната директория и започнете да пишете основния код за вашето приложение.

   ```python
   from flask import Flask

   app = Flask(__name__)

   @app.route('/')
   def home():
       return 'Добре дошли в началната страница на моето уеб приложение!'

   @app.route('/products')
   def products():
       return 'Това е страницата с продукти.'

   @app.route('/contacts')
   def contacts():
       return 'Свържете се с нас на страницата за контакти.'

   if __name__ == '__main__':
       app.run(debug=True)
   ```

---

### Стъпка 3: Добавяне на URL параметри
URL параметрите ни позволяват да направим съдържанието на нашите страници динамично.

1. **Добавяне на рут за конкретен продукт:**
   ```python
   @app.route('/product/<product_id>')
   def product_detail(product_id):
       return f'Информация за продукт с ID: {product_id}'
   ```

2. **Добавяне на рут с два параметъра:**
   ```python
   @app.route('/category/<category_name>/product/<product_id>')
   def category_product(category_name, product_id):
       return f'Продукт с ID: {product_id} от категория: {category_name}'
   ```

---

### Стъпка 4: Работа с методи на заявки
1. **Пример с GET и POST заявки:**
   ```python
   from flask import request

   @app.route('/contact', methods=['GET', 'POST'])
   def contact():
       if request.method == 'POST':
           return 'Благодарим ви, че се свързахте с нас чрез POST заявка!'
       return 'Това е страницата за контакти. Използвайте GET или POST заявка.'
   ```

---

## Практически упражнения

### Упражнение 1: Добавяне на още рутове
1. Добавете нов рут `/services`, който ще показва информация за услугите, предлагани от вашето приложение:
   ```python
   @app.route('/services')
   def services():
       return 'Това са предлаганите от нас услуги.'
   ```

### Упражнение 2: Използване на URL параметри
1. Добавете нов рут `/order/<order_id>`, който ще връща съобщение с информация за дадена поръчка:
   ```python
   @app.route('/order/<order_id>')
   def order_detail(order_id):
       return f'Информация за поръчка номер: {order_id}'
   ```

### Упражнение 3: Добавяне на POST метод за обратна връзка
1. Добавете рут `/feedback`, който поддържа както GET, така и POST заявки:
   ```python
   @app.route('/feedback', methods=['GET', 'POST'])
   def feedback():
       if request.method == 'POST':
           return 'Благодарим ви за обратната връзка!'
       return 'Моля, изпратете вашата обратна връзка.'
   ```

---

## Заключение
В този урок:
- Създадохме различни маршрути, които дефинират различни страници за вашето уеб приложение.
- Научихме как да използваме URL параметри за създаване на динамично съдържание.
- Разгледахме как да обработваме GET и POST заявки.

### Задачи за самостоятелна работа:
1. Добавете нов рут, който приема име на категория и показва всички продукти в тази категория.
2. Използвайте формуляр за събиране на обратна връзка и изпращане чрез POST заявка.
3. Разширете страницата с продукти, за да включите няколко различни подкатегории и да визуализирате всяка чрез параметър в URL.

Тези задачи ще ви помогнат да се уверите, че разбирате добре рутинга и динамичното управление на съдържание във Flask.
