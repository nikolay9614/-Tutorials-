
# Глава 14: Приложения: Инструменти, таблици и лабораторни упражнения

В тази глава ще се разгледат практическите аспекти на компютърните мрежи. Ще се предоставят полезни инструменти, таблици с информация и примери за лабораторни упражнения, които да подпомогнат обучението и работата с мрежи.

## 14.1. Таблици с мрежови протоколи

### 14.1.1. Основни мрежови протоколи:

| Протокол | Слой (OSI) | Описание | Портове |
|----------|------------|----------|---------|
| HTTP     | Приложен   | Протокол за уеб комуникация | 80 |
| HTTPS    | Приложен   | Сигурна версия на HTTP | 443 |
| FTP      | Приложен   | Протокол за файлов трансфер | 20, 21 |
| SMTP     | Приложен   | Протокол за изпращане на имейли | 25 |
| DNS      | Приложен   | Превежда домейн имена в IP адреси | 53 |
| DHCP     | Приложен/Мрежов | Автоматично присвоява IP адреси | 67 (сървър), 68 (клиент) |
| TCP      | Транспортен | Надежден пренос на данни | - |
| UDP      | Транспортен | Ненадежден, но бърз пренос | - |
| ICMP     | Мрежов     | Диагностика и управление | - |
| ARP      | Канален    | Превежда IP адреси в MAC адреси | - |

## 14.2. Инструменти за анализ и диагностика

### 14.2.1. Wireshark
**Описание:**  
Инструмент за анализ на мрежови пакети в реално време.

**Функции:**
- Преглед на заглавната част на пакети.
- Засичане на проблеми като загуба на пакети или забавяне.

**Пример:**  
Използване на Wireshark за откриване на подозрителен ICMP трафик в локална мрежа.

### 14.2.2. Ping
**Описание:**  
Проверява достъпността на устройство в мрежата чрез изпращане на ICMP пакети.

**Команда:**  
```bash
ping 192.168.1.1
```

**Пример:**  
Проверка дали рутерът е достъпен в локалната мрежа.

### 14.2.3. Traceroute
**Описание:**  
Проследява пътя на данните до целевия адрес, като показва всички междинни устройства.

**Команда:**  
```bash
traceroute www.google.com
```

**Пример:**  
Откриване на проблеми със забавяне по маршрута между два офиса.

### 14.2.4. ipconfig/ifconfig
**Описание:**  
Показва информация за мрежовата конфигурация на устройството.

**Команди:**  
- `ipconfig` (Windows)
- `ifconfig` (Linux/Mac)

**Пример:**  
Проверка на текущия IP адрес и състоянието на мрежовата връзка.

### 14.2.5. Nmap
**Описание:**  
Сканира мрежи и открива устройства, отворени портове и услуги.

**Команда:**  
```bash
nmap 192.168.1.0/24
```

**Пример:**  
Сканиране на локална мрежа за откриване на устройства със слаби точки.

## 14.3. Лабораторни упражнения

### 14.3.1. Упражнение 1: Създаване на LAN мрежа
**Цел:**  
Да се създаде локална мрежа с три устройства и един суич.

**Стъпки:**
1. Свържете три компютъра към суич с помощта на Ethernet кабели.
2. Конфигурирайте статични IP адреси за всяко устройство.
3. Тествайте връзката с командата `ping`.

**Очакван резултат:**  
Всяко устройство трябва успешно да отговаря на пинг заявки от останалите.

### 14.3.2. Упражнение 2: Настройка на DHCP
**Цел:**  
Да се конфигурира рутер да разпределя IP адреси автоматично чрез DHCP.

**Стъпки:**
1. Влезте в интерфейса на рутера.
2. Активирайте DHCP сървъра и задайте диапазон на IP адресите (напр. 192.168.1.100–192.168.1.200).
3. Свържете клиентско устройство и проверете получения IP адрес с `ipconfig`.

**Очакван резултат:**  
Устройството автоматично трябва да получи адрес от DHCP сървъра.

### 14.3.3. Упражнение 3: Засичане на мрежов трафик с Wireshark
**Цел:**  
Да се анализира мрежовият трафик между две устройства.

**Стъпки:**
1. Стартирайте Wireshark на устройство в мрежата.
2. Използвайте `ping`, за да изпратите ICMP пакети до друго устройство.
3. Прегледайте засечените пакети в Wireshark.

**Очакван резултат:**  
Трафикът трябва да покаже ICMP заявки и отговори между устройствата.

### 14.3.4. Упражнение 4: Конфигуриране на VLAN
**Цел:**  
Да се създадат две VLAN на управляван суич за разделяне на мрежовия трафик.

**Стъпки:**
1. Влезте в интерфейса на суича.
2. Създайте две VLAN (напр. VLAN 10 и VLAN 20).
3. Присвоете портове на всяка VLAN.
4. Тествайте свързаността между устройствата в една и съща VLAN.

**Очакван резултат:**  
Устройствата в различни VLAN не трябва да комуникират директно помежду си.

## 14.4. Примерна структура за мрежово упражнение

### Сценарий: Настройка на корпоративна мрежа
**Цел:**  
Да се създаде сигурна мрежа с разделени VLAN за отделите „Маркетинг“ и „ИТ“.

**Изисквания:**
- Рутер с активиран DHCP.
- Суич с VLAN поддръжка.
- Интернет свързаност за всички устройства.

**Стъпки:**
1. Конфигурирайте рутера да разпределя IP адреси в диапазона 192.168.10.0/24.
2. Създайте VLAN 10 за маркетинг и VLAN 20 за ИТ.
3. Осигурете интернет достъп чрез рутера.

**Тестове:**
1. Проверете дали устройствата в една VLAN могат да комуникират помежду си.
2. Тествайте интернет връзката.

## Заключение
Инструментите и упражненията, описани в тази глава, предоставят основа за практическо обучение в компютърните мрежи. Те помагат за усвояване на умения за анализ, диагностика и конфигуриране на мрежови устройства и технологии.

## 14.3.5. Упражнение 5: Конфигуриране на статични маршрути
**Цел:**  
Да се конфигурират статични маршрути между два рутера за осигуряване на комуникация между две мрежи.

**Сценарий:**  
Имате две мрежи:
- **Мрежа 1:** 192.168.1.0/24
- **Мрежа 2:** 192.168.2.0/24

Двата рутера са свързани чрез интерфейси 192.168.0.1 и 192.168.0.2.

**Стъпки:**
1. Конфигурирайте интерфейсите на рутерите със съответните IP адреси.
2. На Рутер 1 добавете статичен маршрут към Мрежа 2:
```bash
ip route add 192.168.2.0/24 via 192.168.0.2
```
3. На Рутер 2 добавете статичен маршрут към Мрежа 1:
```bash
ip route add 192.168.1.0/24 via 192.168.0.1
```
4. Тествайте свързаността между устройствата в двете мрежи с `ping`.

**Очакван резултат:**  
Устройствата от Мрежа 1 и Мрежа 2 могат да комуникират помежду си.

## 14.3.6. Упражнение 6: Настройка на защитна стена (Firewall)
**Цел:**  
Да се конфигурира защитна стена за блокиране на неоторизиран достъп до уеб сървър.

**Сценарий:**  
Уеб сървърът е достъпен на IP адрес 192.168.1.100 и порт 80. Трябва да блокирате достъпа от IP адрес 192.168.1.50.

**Стъпки:**
1. Влезте в интерфейса на защитната стена или използвайте терминал.
2. Добавете правило за блокиране на достъпа от IP адрес 192.168.1.50:
```bash
iptables -A INPUT -s 192.168.1.50 -d 192.168.1.100 -p tcp --dport 80 -j DROP
```
3. Добавете правило за разрешаване на достъпа за всички останали:
```bash
iptables -A INPUT -d 192.168.1.100 -p tcp --dport 80 -j ACCEPT
```
4. Запазете правилата.

**Очакван резултат:**  
IP адрес 192.168.1.50 няма достъп до сървъра, докато останалите IP адреси могат да го достъпват нормално.

## 14.3.7. Упражнение 7: Създаване на QoS правила (Quality of Service)
**Цел:**  
Да се конфигурира приоритет за VoIP трафик в локалната мрежа.

**Сценарий:**  
Трафикът от VoIP телефони (192.168.1.0/24) трябва да получи висок приоритет, докато другият трафик се класифицира като обикновен.

**Стъпки:**
1. Влезте в интерфейса на рутера.
2. Отидете в секцията за QoS и активирайте QoS.
3. Добавете правило за приоритизиране на VoIP трафик (UDP портове 5060–5061):
- Източник: 192.168.1.0/24
- Протокол: UDP
- Портове: 5060–5061
- Приоритет: Висок.
4. Запазете конфигурацията и наблюдавайте трафика.

**Очакван резултат:**  
VoIP трафикът получава приоритет, като осигурява плавни разговори дори при натоварена мрежа.

## 14.3.8. Упражнение 8: Симулиране на DDoS атака и защита
**Цел:**  
Да се засече и ограничи DDoS атака към сървър.

**Сценарий:**  
Уеб сървърът (192.168.1.100) е подложен на атака от множество IP адреси, които изпращат голям брой SYN заявки.

**Стъпки:**
1. Стартирайте Wireshark на сървъра и филтрирайте за SYN пакети:
```bash
tcp.flags.syn == 1 && tcp.flags.ack == 0
```
2. Определете източниците на атаката.
3. Конфигурирайте защитната стена да ограничи броя на SYN заявките:
```bash
iptables -A INPUT -p tcp --syn -m limit --limit 1/s -j ACCEPT
iptables -A INPUT -p tcp --syn -j DROP
```
4. Запазете правилата и наблюдавайте трафика.

**Очакван резултат:**  
DDoS атаката е ограничена, а легитимният трафик е защитен.

## 14.3.9. Упражнение 9: Настройка на мониторинг с Nagios
**Цел:**  
Да се конфигурира Nagios за наблюдение на състоянието на мрежови устройства.

**Сценарий:**  
Nagios трябва да следи състоянието на три сървъра:
- **Сървър 1:** 192.168.1.101
- **Сървър 2:** 192.168.1.102
- **Сървър 3:** 192.168.1.103

**Стъпки:**
1. Инсталирайте Nagios на сървър.
2. Добавете конфигурация за наблюдение на сървърите:
```bash
define host {
    use                     linux-server
    host_name               Server1
    address                 192.168.1.101
}
```
3. Активирайте проверка на услугите (HTTP, PING):
```bash
define service {
    use                     generic-service
    host_name               Server1
    service_description     PING
    check_command           check_ping!100.0,20%!500.0,60%
}
```
4. Рестартирайте Nagios.

**Очакван резултат:**  
Nagios показва статуса на сървърите (включително наличност и време за отговор).

## 14.3.10. Упражнение 10: Настройка на DNS сървър
**Цел:**  
Да се конфигурира DNS сървър, който да превежда домейн имена в IP адреси.

**Сценарий:**  
DNS сървърът трябва да отговаря на заявките за домейна example.local и да насочва към 192.168.1.100.

**Стъпки:**
1. Инсталирайте DNS софтуер (напр. BIND).
2. Добавете зона за домейна example.local:
```bash
zone "example.local" {
    type master;
    file "/etc/bind/db.example.local";
}
```
3. Конфигурирайте файла с DNS записи:
```bash
$TTL    86400
@       IN      SOA     ns1.example.local. admin.example.local. (
                        1         ; Serial
                        3600      ; Refresh
                        1800      ; Retry
                        604800    ; Expire
                        86400 )   ; Minimum TTL
@       IN      NS      ns1.example.local.
ns1     IN      A       192.168.1.100
```
4. Рестартирайте DNS услугата и тествайте с `nslookup`.

**Очакван резултат:**  
Запитванията за example.local връщат IP адрес 192.168.1.100.

## Заключение
Допълнителните примери и упражнения обхващат широк спектър от практически умения – от базова конфигурация до управление на сигурността и мониторинг. Те предоставят реални сценарии, които подготвят за работа в корпоративна среда или усъвършенстване на мрежови умения. Ако имате въпроси или искате още упражнения, съм на разположение!
