
# Глава 6: Транспортен слой

Транспортният слой е четвъртият слой в OSI модела и е отговорен за надеждния пренос на данни между устройства. Той осигурява управление на потока, корекция на грешки и поддържане на сесии, което гарантира, че данните се доставят правилно и в точния ред.

## 6.1. Протоколи на транспортния слой
Транспортният слой използва два основни протокола:

### 6.1.1. TCP (Transmission Control Protocol):
**Характеристики:**
- Надежден пренос на данни.
- Гарантира, че данните се доставят без грешки, в правилния ред и без загуба.
- Осъществява „ръкостискане“ (handshake) за установяване на връзка преди преноса.

**Механизми:**
- **Сегментиране:** Данните се разделят на малки сегменти.
- **Потвърждения (ACK):** Получателят потвърджава получаването на всеки сегмент.
- **Повторно предаване:** Ако сегментът не бъде потвърден, той се изпраща отново.

**Приложения:**
- Имейли (SMTP), файлов трансфер (FTP), уеб страници (HTTP).

### 6.1.2. UDP (User Datagram Protocol):
**Характеристики:**
- Ненадежден, но бърз протокол.
- Не гарантира правилен ред на данните или потвърждение за получаването.
- Подходящ за приложения, където скоростта е по-важна от надеждността.

**Приложения:**
- Видеострийминг, онлайн игри, VoIP (глас през интернет).

## 6.2. Портове и сесии

### 6.2.1. Портове:
Портовете са виртуални точки за свързване, които позволяват на множество приложения да използват мрежата едновременно.  
Всеки порт има уникален номер (от 0 до 65535).

**Често използвани портове:**
- Порт 80: HTTP (уеб страници).
- Порт 443: HTTPS (сигурни уеб страници).
- Порт 25: SMTP (изпращане на имейли).
- Порт 53: DNS (системата за имена на домейни).

### 6.2.2. Сесии:
Транспортният слой поддържа сесии между устройства. Това включва установяване на връзка, поддържане на комуникацията и прекратяване на връзката.

**Пример:**  
Когато зареждате уеб страница, транспортният слой отваря сесия чрез TCP, която продължава, докато всички данни не бъдат получени.

## 6.3. Управление на потока и контрола на задръстванията

### 6.3.1. Управление на потока (Flow Control):
Осигурява, че изпращащото устройство не изпраща данни по-бързо, отколкото получателят може да обработи.

**Методи:**
- **Sliding Window:** Получателят определя колко данни може да приеме наведнъж.
- **Buffering:** Данните временно се съхраняват, ако получателят е претоварен.

### 6.3.2. Контрол на задръстванията (Congestion Control):
Предотвратява претоварване на мрежата.

**Механизми:**
- TCP намалява скоростта на изпращане на данни, ако засече претоварване.
- Използва алгоритми като „Slow Start“ и „Congestion Avoidance“.

**Пример:**  
Видеострийминг платформите използват адаптивно предаване, което променя качеството на видеото в зависимост от мрежовите условия.

## Примерна реализация на транспортния слой:

### Сценарий: Когато изпращате файл по FTP
1. TCP разделя файла на сегменти.
2. Всеки сегмент получава номер за подредба.
3. Ако сегмент не бъде потвърден, той се изпраща отново.
4. След като всички сегменти бъдат получени, файлът се сглобява при получателя.

Транспортният слой играе критична роля за осигуряване на надеждна комуникация между устройства. Ако желаете, мога да продължа със слоя на приложението!
